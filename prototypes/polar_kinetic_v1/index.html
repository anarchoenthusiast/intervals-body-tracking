<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polar Text Experiment</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º p5.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è GUI (–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #222; }
        canvas { display: block; }
        /* –î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è–µ–º —à–∞—Ö–º–∞—Ç–Ω—ã–π —Ñ–æ–Ω */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(45deg, #333 25%, transparent 25%),
                linear-gradient(-45deg, #333 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #333 75%),
                linear-gradient(-45deg, transparent 75%, #333 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            pointer-events: none;
            z-index: -1;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <script>
        window.onerror = function(msg, url, line) {
           alert("Error: " + msg + "\nLine: " + line);
        };

        let settings = {
            text: "SATURN ",     // –¢–µ–∫—Å—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            petals: 6,           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–ø–µ—Å—Ç–∫–æ–≤
            rings: 15,           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä—É–≥–æ–≤
            spacing: 25,         // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫—Ä—É–≥–∞–º–∏
            amplitude: 20,       // –°–∏–ª–∞ –∏—Å–∫–∞–∂–µ–Ω–∏—è (–≥–ª—É–±–∏–Ω–∞ –ª–µ–ø–µ—Å—Ç–∫–æ–≤)
            twist: 0.2,          // –ó–∞–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ (—Å–¥–≤–∏–≥ —Ñ–∞–∑—ã –º–µ–∂–¥—É –∫—Ä—É–≥–∞–º–∏)
            speed: 0.02,         // –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
            textSize: 12,        // –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞
            density: 1.0,        // –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –±—É–∫–≤
            transparentBg: false, // –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏
            aspectRatio: '1:1',  // –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω
            resolution: 1080     // –ë–∞–∑–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (—à–∏—Ä–∏–Ω–∞ –∏–ª–∏ –≤—ã—Å–æ—Ç–∞)
        };

        let canvasWidth = 1080;
        let canvasHeight = 1080;
        let pg; 
        
        // –û–±—ä—è–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ
        let recorder;
        let chunks = [];
        let isRecording = false;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            textAlign(CENTER, CENTER);
            textFont('Courier New');
            
            // –°–Ω–∞—á–∞–ª–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä—ã!
            updateCanvasSize();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (GUI)
            let gui = new dat.GUI();
            gui.add(settings, 'text').name('–¢–µ–∫—Å—Ç');
            
            let fAnim = gui.addFolder('–ê–Ω–∏–º–∞—Ü–∏—è');
            fAnim.add(settings, 'petals', 0, 20).step(1).name('–õ–µ–ø–µ—Å—Ç–∫–∏');
            fAnim.add(settings, 'amplitude', 0, 100).name('–ê–º–ø–ª–∏—Ç—É–¥–∞');
            fAnim.add(settings, 'rings', 1, 30).step(1).name('–ö–æ–ª-–≤–æ –∫–æ–ª–µ—Ü');
            fAnim.add(settings, 'spacing', 10, 100).name('–û—Ç—Å—Ç—É–ø –∫–æ–ª–µ—Ü');
            fAnim.add(settings, 'twist', -2, 2).step(0.01).name('–ó–∞–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ');
            fAnim.add(settings, 'speed', -0.1, 0.1).step(0.001).name('–°–∫–æ—Ä–æ—Å—Ç—å');
            fAnim.add(settings, 'density', 0.5, 2).name('–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –±—É–∫–≤');
            fAnim.open();
            
            let fExport = gui.addFolder('–≠–∫—Å–ø–æ—Ä—Ç / –†–∞–∑–º–µ—Ä');
            fExport.add(settings, 'aspectRatio', ['1:1', '9:16', '16:9', '4:5']).name('–§–æ—Ä–º–∞—Ç').onChange(updateCanvasSize);
            fExport.add(settings, 'resolution', [720, 1080, 1920]).name('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ').onChange(updateCanvasSize);
            fExport.add(settings, 'transparentBg').name('–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω');
            
            let recordingObj = {
                record: function() {
                    startRecording();
                }
            };
            fExport.add(recordingObj, 'record').name('üî¥ –ó–∞–ø–∏—Å–∞—Ç—å (WebM)');
            fExport.open();
        }

        function updateCanvasSize() {
            let res = parseInt(settings.resolution);
            let w, h;
            
            // –õ–æ–≥–∏–∫–∞: resolution - —ç—Ç–æ "–∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞" –∏–ª–∏ –±–∞–∑–∞.
            // –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è: resolution - —ç—Ç–æ –í–°–ï–ì–î–ê —à–∏—Ä–∏–Ω–∞ (width), –∫—Ä–æ–º–µ —Å–ª—É—á–∞—è 16:9 landscape, –≥–¥–µ —ç—Ç–æ –≤—ã—Å–æ—Ç–∞?
            // –î–∞–≤–∞–π –¥–æ–≥–æ–≤–æ—Ä–∏–º—Å—è: resolution - —ç—Ç–æ —à–∏—Ä–∏–Ω–∞ Canvas.
            
            if (settings.aspectRatio === '1:1') {
                w = res; 
                h = res;
            } else if (settings.aspectRatio === '9:16') {
                w = res;
                h = Math.floor(res * (16/9));
            } else if (settings.aspectRatio === '16:9') {
                // –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º 1920x1080 –ø—Ä–∏ –≤—ã–±–æ—Ä–µ 1080, —Ç–æ res - —ç—Ç–æ –≤—ã—Å–æ—Ç–∞
                // –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º 1080x607, —Ç–æ res - —ç—Ç–æ —à–∏—Ä–∏–Ω–∞
                // –û–±—ã—á–Ω–æ –¥–ª—è —Å—Ç–æ—Ä–∏—Å 1080x1920, –∑–Ω–∞—á–∏—Ç –¥–ª—è —é—Ç—É–±–∞ 1920x1080.
                // –ü—É—Å—Ç—å resolution –∑–∞–¥–∞–µ—Ç –ú–ï–ù–¨–®–£–Æ —Å—Ç–æ—Ä–æ–Ω—É.
                h = res;
                w = Math.floor(res * (16/9));
            } else if (settings.aspectRatio === '4:5') {
                w = res;
                h = Math.floor(res * (5/4));
            } else {
                w = res;
                h = res;
            }

            canvasWidth = w;
            canvasHeight = h;
            
            console.log(`Canvas size updated: ${canvasWidth}x${canvasHeight}`);

            // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –±—É—Ñ–µ—Ä
            if (pg) pg.remove();
            pg = createGraphics(canvasWidth, canvasHeight);
            pg.textAlign(CENTER, CENTER);
            pg.textFont('Courier New');
        }

        function startRecording() {
            if (isRecording) return;
            isRecording = true;
            chunks = [];
            
            // –í–ê–ñ–ù–û: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –∞ –ø–æ—Ç–æ–∫ —Å –±—É—Ñ–µ—Ä–∞ pg!
            // –ù–æ p5.js createGraphics –Ω–µ —Å–æ–∑–¥–∞–µ—Ç DOM —ç–ª–µ–º–µ–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
            // –ü–æ—ç—Ç–æ–º—É –Ω–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è —Ä–∏—Å–æ–≤–∞—Ç—å pg –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–∞–Ω–≤–∞—Å–µ –∏ –∫—Ä–æ–ø–∞—Ç—å, –ò–õ–ò...
            // –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ: –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –º—ã –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –≤ –±—É—Ñ–µ—Ä–µ.
            
            // P5.js hack: —á—Ç–æ–±—ã –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ø–æ—Ç–æ–∫ —Å p5.Graphics, –Ω—É–∂–Ω–æ —Ä–∏—Å–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–∫—Ä—ã—Ç–æ–º –∫–∞–Ω–≤–∞—Å–µ
            // –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å canvas.captureStream() –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–∞–Ω–≤–∞—Å–∞, –ù–û...
            // –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —ç–∫—Ä–∞–Ω.
            
            // –õ—É—á—à–∏–π —Å–ø–æ—Å–æ–±: –≤—Ä–µ–º–µ–Ω–Ω–æ resizeCanvas –ø–æ–¥ —Ü–µ–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä, –∑–∞–ø–∏—Å–∞—Ç—å, –ø–æ—Ç–æ–º –≤–µ—Ä–Ω—É—Ç—å.
            // –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç pixel-perfect –∫–∞—á–µ—Å—Ç–≤–æ.
            
            resizeCanvas(canvasWidth, canvasHeight);
            
            // –ñ–¥–µ–º 1 –∫–∞–¥—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
            setTimeout(() => {
                const stream = document.querySelector('canvas').captureStream(30);
                
                let options;
                if (settings.transparentBg) {
                    options = { mimeType: 'video/webm; codecs=vp9' };
                    if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                        options = { mimeType: 'video/webm; codecs=vp8' };
                    }
                } else {
                    options = { mimeType: 'video/webm; codecs=vp9' };
                    if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                        options = { mimeType: 'video/webm' };
                    }
                }
                
                recorder = new MediaRecorder(stream, options);
                
                recorder.ondataavailable = (e) => {
                    if (e.data.size > 0) chunks.push(e.data);
                };
                
                recorder.onstop = () => {
                    saveVideo();
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                    resizeCanvas(windowWidth, windowHeight);
                };
                
                recorder.start();
                console.log("–ó–∞–ø–∏—Å—å –Ω–∞—á–∞–ª–∞—Å—å...");
                
                setTimeout(() => {
                    recorder.stop();
                    isRecording = false;
                    console.log("–ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞.");
                }, 5000);
            }, 100);
        }

        function saveVideo() {
            const blob = new Blob(chunks, { type: 'video/webm' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            // –ò–º—è —Ñ–∞–π–ª–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –∏–ª–∏ –Ω–µ—Ç
            const filename = settings.transparentBg 
                ? 'polar_kinetic_type_transparent.webm' 
                : 'polar_kinetic_type.webm';
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            
            // –û—á–∏—Å—Ç–∫–∞
            setTimeout(() => {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 100);
        }

        function draw() {
            background(20); // –¢–µ–º–Ω—ã–π —Ñ–æ–Ω "—Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞"

            // –ó–∞—â–∏—Ç–∞ –æ—Ç NaN
            if (!canvasWidth || !canvasHeight) return;
            
            // –ï—Å–ª–∏ –∏–¥–µ—Ç –∑–∞–ø–∏—Å—å, —Ä–∏—Å—É–µ–º –¢–û–õ–¨–ö–û –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞ –≤–µ—Å—å –∫–∞–Ω–≤–∞—Å
            if (isRecording) {
                if (settings.transparentBg) clear();
                else background(0); // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ (–µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
                
                // –¶–µ–Ω—Ç—Ä –∫–∞–Ω–≤–∞—Å–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä (—Ç–∞–∫ –∫–∞–∫ –º—ã —Å–¥–µ–ª–∞–ª–∏ resizeCanvas)
                drawPattern(width/2, height/2);
                return;
            }

            // === –†–ï–ñ–ò–ú –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê ===
            push(); // <--- –î–æ–±–∞–≤–∏–ª push –∑–¥–µ—Å—å, —Ç–∞–∫ –∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ –æ–Ω –±—ã–ª –ø–æ—Ç–µ—Ä—è–Ω –ø—Ä–∏ –∫–æ–ø–∏–ø–∞—Å—Ç–µ? –ù–µ—Ç, –æ–Ω –±—ã–ª.
            // –ù–æ –ª—É—á—à–µ —è–≤–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –±–ª–æ–∫
             
            
            // –†–∏—Å—É–µ–º "–ø–æ–¥–ª–æ–∂–∫—É" –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ (–±–µ–ª–∞—è —Ä–∞–º–∫–∞)
            // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ–ª—Å—Ç", —á—Ç–æ–±—ã –æ–Ω –≤–ª–µ–∑–∞–ª –≤ —ç–∫—Ä–∞–Ω
            let availableW = Math.max(100, width - 100);
            let availableH = Math.max(100, height - 100);
            let scaleFactor = Math.min(availableW / canvasWidth, availableH / canvasHeight);
            
            // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º
            translate(width / 2, height / 2);
            scale(scaleFactor);
            
            // –§–æ–Ω –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ–ª—Å—Ç–∞ (–æ–±–ª–∞—Å—Ç—å –∑–∞–ø–∏—Å–∏)
            fill(settings.transparentBg ? 50 : 0); // –¢–µ–º–Ω–µ–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞
            noStroke();
            rectMode(CENTER);
            rect(0, 0, canvasWidth, canvasHeight);
            
            // –®–∞—Ö–º–∞—Ç–∫–∞ –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–ø–∏—Å–∏)
            if (settings.transparentBg) {
                drawingContext.save();
                drawingContext.beginPath();
                drawingContext.rect(-canvasWidth/2, -canvasHeight/2, canvasWidth, canvasHeight);
                drawingContext.clip();
                // ... —Ç—É—Ç –º–æ–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω, –Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∏–º —Å–µ—Ä—ã–π
                drawingContext.restore();
            }
            
            // –†–∞–º–∫–∞ (–≥—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø–∏—Å–∏)
            noFill();
            stroke(255, 0, 0); // –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–∏–¥–Ω–æ
            strokeWeight(2 / scaleFactor); // –ß—Ç–æ–±—ã —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏ –Ω–µ –∑–∞–≤–∏—Å–µ–ª–∞ –æ—Ç –∑—É–º–∞
            rect(0, 0, canvasWidth, canvasHeight);
            
            // –†–∏—Å—É–µ–º —Å–∞–º –ø–∞—Ç—Ç–µ—Ä–Ω
            // –í–∞–∂–Ω–æ: drawPattern —Ä–∏—Å—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ (0,0), –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–¥–≤–∏–Ω—É–ª–∏ –≤ —Ü–µ–Ω—Ç—Ä translate-–æ–º
            drawPattern(0, 0);
            
            pop(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Ç—Ä–∏—Ü—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
            
            // –ò–Ω—Ñ–æ —Ç–µ–∫—Å—Ç (–ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ, –≤ —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞)
            fill(255);
            noStroke();
            textSize(16);
            textAlign(LEFT, TOP);
            text(`REC Format: ${settings.aspectRatio} (${canvasWidth}x${canvasHeight})`, 20, 20);
        }

        // –í—ã–Ω–µ—Å–ª–∏ –ª–æ–≥–∏–∫—É –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
        function drawPattern(centerX, centerY) {
            fill(255);
            noStroke();
            textSize(settings.textSize);

            let time = frameCount * settings.speed;

            // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∏—Å—É–µ—Ç—Å—è - –Ω–∞—Ä–∏—Å—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫—Ä—É–≥ –≤ —Ü–µ–Ω—Ç—Ä–µ
            // ellipse(centerX, centerY, 10, 10);

            // –¶–∏–∫–ª –ø–æ –∫–æ–ª—å—Ü–∞–º (–æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –∫ –∫—Ä–∞—è–º)
            for (let i = 1; i <= settings.rings; i++) {
                
                let currentBaseRadius = i * settings.spacing;
                let circumference = TWO_PI * currentBaseRadius;
                let charsCount = floor((circumference * settings.density) / (settings.textSize * 0.8));
                let angleStep = TWO_PI / charsCount;
                let ringPhase = i * settings.twist;

                for (let j = 0; j < charsCount; j++) {
                    let angle = j * angleStep;
                    let wave = sin(angle * settings.petals + time + ringPhase);
                    let r = currentBaseRadius + wave * settings.amplitude;

                    let x = centerX + r * cos(angle);
                    let y = centerY + r * sin(angle);

                    push();
                    translate(x, y);
                    rotate(angle + HALF_PI);
                    
                    let charIndex = floor(j + time * 10) % settings.text.length;
                    if (charIndex < 0) charIndex += settings.text.length;
                    
                    text(settings.text[charIndex], 0, 0);
                    pop();
                }
            }
        }

        // –ß—Ç–æ–±—ã –∫–∞–Ω–≤–∞—Å –º–µ–Ω—è–ª—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>